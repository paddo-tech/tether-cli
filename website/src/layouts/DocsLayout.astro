---
import BaseLayout from './BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;

const docSections = [
  {
    title: 'Getting Started',
    pages: [
      { title: 'Introduction', href: '#introduction' },
      { title: 'Installation', href: '#installation' },
      { title: 'Quick Start', href: '#quick-start' },
    ],
  },
  {
    title: 'Core Concepts',
    pages: [
      { title: 'How It Works', href: '#how-it-works' },
      { title: 'Encryption', href: '#encryption' },
    ],
  },
  {
    title: 'Commands',
    pages: [
      { title: 'All Commands', href: '#commands' },
    ],
  },
  {
    title: 'Features',
    pages: [
      { title: 'Configuration', href: '#configuration' },
      { title: 'Package Managers', href: '#package-managers' },
      { title: 'Team Sync', href: '#team-sync' },
    ],
  },
  {
    title: 'Help',
    pages: [
      { title: 'Troubleshooting', href: '#troubleshooting' },
    ],
  },
];

const currentPath = Astro.url.pathname;
---

<BaseLayout title={title} description={description}>
  <Navbar />
  <style>
    html { scroll-behavior: smooth; }
  </style>

  <div class="pt-16 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="grid lg:grid-cols-4 gap-8">
        <!-- Sidebar -->
        <aside class="lg:col-span-1">
          <nav class="sticky top-24 space-y-6">
            {docSections.map((section) => (
              <div>
                <h3 class="font-mono font-semibold text-text mb-2">{section.title}</h3>
                <ul class="space-y-1">
                  {section.pages.map((page) => (
                    <li>
                      <a
                        href={page.href}
                        class="block py-1 px-3 rounded text-sm transition-colors text-muted hover:text-primary hover:bg-surface/50"
                      >
                        {page.title}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </nav>
        </aside>

        <!-- Main Content -->
        <main class="lg:col-span-3">
          <article class="prose prose-invert max-w-none">
            <slot />
          </article>
        </main>
      </div>
    </div>
  </div>

  <Footer />
</BaseLayout>
